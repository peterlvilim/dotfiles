// Copyright (c) 2010 Remember The Milk Pty Ltd. All rights reserved.
(function(){function g(b){try{if(b&&b.data){var a=JSON.parse(b.data);if("RTMLoader"in a){var e=chrome.extension.connect({name:a.RTMLoader.id});e.onMessage.addListener(function(h){var c=window.top.document.createElement("script");c.setAttribute("id","rtm-resp-"+a.RTMLoader.id);c.innerText="RTM.handleLoader("+JSON.stringify(h)+");";window.top.document.body.appendChild(c)});e.postMessage(a.RTMLoader.data)}else if("RTMToken"in a){var f="RTMToken_"+(new Date).getTime(),d=window.top.document.createElement("script");
d.setAttribute("id","rtm-token-resp-"+f);d.innerText="RTM.handleLoader("+JSON.stringify({id:f,token:a.RTMToken,forID:a.forID})+");";window.top.document.body.appendChild(d)}}}catch(l){}}function i(){try{window.addEventListener("message",g,false);var b=window.document.createElement("script");b.setAttribute("id","remember-the-milk-loader");b.src=[window.document.location.protocol,"//www.rememberthemilk.com/services/gmail/loader.rtm?c=1"].join("");window.document.body.appendChild(b)}catch(a){}}function j(){document&&
document.getElementById("js_frame")&&!document.getElementById("rtm_proxy")&&i()}var k=setInterval(function(){if(/loaded|complete/.test(document.readyState)){clearInterval(k);j()}},10)})();
