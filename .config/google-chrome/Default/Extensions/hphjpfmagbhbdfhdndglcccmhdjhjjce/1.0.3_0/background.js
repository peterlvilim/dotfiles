function RTMLoader(){}RTMLoader.onPortConnect=function(h){var e=function(a,c){c.onMessage.removeListener(e);RTMLoader.request(c,a.path,a.params,a.use_post,a.no_eval,a.get_as_post,a.gauth,a.rauth,a.id)};h.onMessage.addListener(e)};
RTMLoader.request=function(h,e,a,c,i,j,n,o,k){var b=new XMLHttpRequest,f=[];for(var l in a)f.push(encodeURIComponent(l)+"="+encodeURIComponent(a[l]));f=f.join("&");c=!!c;var g=e+(!c?"?"+f:"");e=c||j?"POST":"GET";b.onreadystatechange=function(){if(b.readyState===4){var d=-1;try{d=b.status}catch(p){}if(d!==200)h.postMessage({type:"xhr",url:g,status:"fail",id:k});else{d=b.responseText;i||(d=d.substring(9));var m=null;try{m=!i?JSON.parse(d):d}catch(q){}h.postMessage({type:"xhr",url:g,status:"ok",obj:m,
id:k})}}};a=null;if(g.indexOf("google.com")>-1)a=n;else if(g.indexOf("rememberthemilk.com")>-1)a=o;try{b.open(e,g,true);if(c){b.setRequestHeader("Content-Type","application/x-www-form-urlencoded");a!==null&&b.setRequestHeader("Cookie",a);b.send(f)}else if(j){b.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8");b.setRequestHeader("Content-Length","0");a!==null&&b.setRequestHeader("Cookie",a);b.send(f)}else{a!==null&&b.setRequestHeader("Cookie",a);b.send(null)}}catch(r){}};
chrome.extension.onConnect.addListener(RTMLoader.onPortConnect);
